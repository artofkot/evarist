<!doctype html>
<!-- <html lang="en">  // ?? -->
<html>

  <head>
    <meta charset="utf-8"> <!-- as early as possible -->
    
    <!-- <title>Evarist</title> -->
      
    <!-- Google analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-56745698-2', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Yandex.Metrika counter --><script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter31555213 = new Ya.Metrika({ id:31555213, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="https://mc.yandex.ru/watch/31555213" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->
    <!-- I added it early, so that even if user closes window, metrika catches him -->

    <!-- Bootstrap headers from official Get Started -->
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1"> 
      <!-- maximum-scale=1, user-scalable=no --> <!-- add if u want it to look like a native app-->

      <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

      <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"> -->
      <link rel="stylesheet" href="/static/vendor/bootstrap-3.3.2-dist/css/bootstrap.min.css">
      <!-- <link rel="stylesheet" href="/static/vendor/bootstrap-3.3.2-dist/css/bootstrap-theme.min.css"> -->
      <!-- <link rel="stylesheet" href="/static/bootstrap_paper_custom.min.css">  -->

      <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/css/bootstrap.min.css"> --> <!-- just use the latest -->

      <!-- todo: fallback: http://eddmann.com/posts/providing-local-js-and-css-resources-for-cdn-fallbacks/ -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min.js"></script>
      <!-- <script src="/static/vendor/bootstrap-3.3.2-dist/js/bootstrap.min.js"></script>--> 


      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->

    <!-- mathjax -->
      <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [['$','$'], ['\\(','\\)']],
            processEscapes: true,
            skipTags: ["script","noscript","style","textarea","code"]
          }
        });
      </script>
      <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

    <!-- Fonts -->
    <link href="https://cdn.rawgit.com/Aelay/aelay.github.io/master/ComputerModern/Bright/cmun-bright.css" rel="stylesheet" type="text/css">
    
    <link href="/static/style.css" rel="stylesheet" type="text/css">

    

    {% block head %}{% endblock %}
  </head>


  <body> 
    <div class=page>
      <div class="container">
        <nav class="navbar navbar-default navbar-fixed-top">
          <div class="container" >
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="{{ url_for('workflow.home')}}"> Evarist<sub style='color:green'>&#945</sub> </a>
            </div>

            <div id="navbar" class="collapse navbar-collapse">
              <ul class="nav navbar-nav">
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Полезные ссылки<b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li>
                      <a href="http://www.evarist.org/blog">Блогпост о запуске проекта</a> 
                    </li>
                    <li>
                      <a href="http://www.evarist.org/problem_sets/solution_examples/">
                      Примеры правильных решений
                      </a> 
                    </li>
                    <li>
                      <a href="{{url_for('workflow.users')}}">Топ 10 пользователей</a> 
                    </li>
                  

                    {% if g.user%}
                    <li>
                      <a href="{{url_for('workflow.my_solutions')}}">Мои решения</a> 
                    </li>
                    <li>
                      <a href="{{url_for('workflow.check')}}">Cмотреть и проверять чужие решения</a> 
                    </li>
                    {% else %}
                    <li>
                      <a href="{{url_for('user.login')}}">Зарегистрироваться (чтобы посылать решения)</a> 
                    </li>
                    {%endif%}
                  </ul>
                </li>
                <!-- <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">О нас <b class="caret"></b></a>
                  <ul class="dropdown-menu">
                    <li><a href="{{ url_for('workflow.faq')}}" in_tag="ul" kaspersky_status="skipped"> FAQ </a></li>
                    <li><a href="{{ url_for('workflow.about')}}" in_tag="ul" kaspersky_status="skipped"> О проекте </a></li>
                    <li><a href="{{ url_for('workflow.contact')}}"> Контакты </a></li>
                  </ul>
                </li> -->

                <li><a href="{{ url_for('workflow.faq')}}" in_tag="ul" kaspersky_status="skipped"> FAQ </a></li>
                <li><a href="{{ url_for('workflow.about')}}" in_tag="ul" kaspersky_status="skipped"> О проекте </a></li>
                <li><a href="{{ url_for('workflow.contact')}}"> Контакты </a></li>
              </ul>




              <ul class="nav navbar-nav navbar-right">
                <!-- <li>
                  {% if session['lang']=='en'%}
                  <a href="{{ url_for('workflow.lang_ru') }}?pa={{request.url}}"><small>view RU</small></a>
                  {%else%}
                  <a href="{{ url_for('workflow.lang_en') }}?pa={{request.url}}"><small>view EN</small></a>
                  {%endif%}
                </li> -->

                {% if not g.user%}
                  <li>
                    <form class="navbar-form" class="metanav" action="{{ url_for('user.login') }}" method=post>
                      <a href="{{ url_for('user.login') }}" class="btn btn-default" role="button">Login</a>
                    </form>
                  </li>

                {% else %}
                  <li>
                    {% if g.user.gplus_picture %}
                    <div>
                      <img src="{{g.user.gplus_picture}}" style='height:50px;width=50px;border-radius: 150px;-webkit-border-radius: 150px;-moz-border-radius: 150px; vertical-align:middle '>
                    </div>
                    {% endif %}
                  </li>
                  <li> <a href="{{ url_for('workflow.home') }}">{{g.user | safe}} </a></li>
                  <li><a href="{{ url_for('user.logout') }}">Log out</a></li>
                {% endif%}

                {% if g.user and g.user.rights.is_moderator%}
                  <li><a href="{{url_for('admin.home')}}">[admin interface]</a></li>
                {%endif%}
              </ul>

            </div>
          </div>
        </nav>

        {% for message in get_flashed_messages() %}
          <div class='row'>
            <div class="col-md-8 col-md-offset-2">
              <div class="flash">
                <h3 style="color:green">{{ message }}</h3>
              </div>
            </div>
          </div>          
        {% endfor %}
      </div>
      <div class="container">
        {% block body %}{% endblock %}
      </div>

      <!-- chat widget -->
      <script type="text/javascript">
        // var chatovodOnLoad = chatovodOnLoad || [];
        // chatovodOnLoad.push(function() {
        //     chatovod.addChatButton({host: "evarist.chatovod.com", align: "bottomRight",
        //         width: 600, height: 380, defaultLanguage: "en"});
        // });
        // (function() {
        //     var po = document.createElement('script');
        //     po.type = 'text/javascript'; po.charset = "UTF-8"; po.async = true;
        //     po.src = (document.location.protocol=='https:'?'https:':'http:') + '//st1.chatovod.com/api/js/v1.js?2';
        //     var s = document.getElementsByTagName('script')[0];
        //     s.parentNode.insertBefore(po, s);
        // })();
      </script>

      <div class="container" style="backgroud-color:#f5f5f5">
        <footer class="footer">
          <div class="container">
            <p class="text-muted">  </p>
          </div>
        </footer>
      </div>
    </div>
  </body>
</html>