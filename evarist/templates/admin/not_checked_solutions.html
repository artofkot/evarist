{% extends "layout.html" %}
{% block head %}
{% endblock %}
{% block body %}

  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <h1>These are solutions that are NOT checked yet:</h1>
      
    
        {%for solution in solutions | reverse %}
          <hr>
          <div style='height:50px'>
          </div>

          <div>
            <p>
            <em>{{solution.get('problem_set')|safe}}</em>
            <br>
            {{solution.get('problem_text')|safe}}
            </p>
          </div>


          {% if solution['is_right'] %}
            <div class="blog-post">
              <p class="blog-post-meta"><strong>Решение от {{solution['author']}}.</strong> 
              <strong style='color:green'> Проверено, правильное.</strong> </p>
              <pre>{{ solution['text'] }}</pre>
            </div>
          {%else%}
            <div class="blog-post">
              <p class="blog-post-meta"><strong>Решение от {{solution['author']}}.</strong> 
              </p>
              <pre>{{ solution['text'] }}</pre>
            </div>
          {%endif%}
          
          <div class='row'>
            <div class="col-md-4 col-md-offset-1">
              <p>{{solution.get('upvotes')}} за</p>
              <p>{{solution.get('downvotes')}} против</p>
            </div>
            <div class="col-md-4 col-md-offset-2">
              {%if g.user.get('_id') not in (  solution['users_upvoted_ids']|list + solution['users_downvoted_ids']|list )%}
                <form action=" {{url_for('.not_checked_solutions', sol_id=solution['_id'])}}" method="post">
                  
                  {{ vote_form.hidden_tag() }}
                  
                    <div class="form-group" >
                      <div class="radio">
                        <label>
                          <input type="radio" name="vote" id="optionsRadios1" value="upvote" >
                          за
                        </label>
                      </div>
                      <div class="radio">
                        <label>
                          <input type="radio" name="vote" id="optionsRadios2" value="downvote">
                          против
                        </label>
                      </div>
                    </div>
                    <button type="submit" class="btn btn-xs btn-default">Проголосовать</button>
                  
                  <!--  Template for disabled and checked radio button

                  <div class="radio disabled">
                    <label>
                      <input type="radio" name="test" id="optionsRadios3" value="option3" disabled checked>
                      Option three is disabled
                    </label>
                  </div> -->
                  
                </form>
              {%else%}
                <p><strong style='color:green'> Вы уже проголосовали.</strong></p>
              {%endif%}
            </div>
          </div>
          
          


          <form action=" {{url_for('.not_checked_solutions', sol_id=solution['_id'])}}" method="post">
            <div class="form-group" >
              {{ solution_comment_form.hidden_tag() }}
              <label for="feedback_to_solution">  <strong> Комментировать: </strong> </label>
              <textarea class="form-control" rows="2"  name='feedback_to_solution'></textarea>
            </div>
            <button type="submit" class="btn btn-default">Отправить</button>
          </form>
          
          <div style='height:5px'></div>

          <button class="btn btn-xs btn-default" type="button" data-toggle="collapse" data-target="#collapseId{{loop.index}}" aria-expanded="false" aria-controls="collapseId{{loop.index}}">
            press to see previous comments
          </button>
          <div class="collapse" id="collapseId{{loop.index}}">
            {% for post in solution['discussion'] | reverse %}
              <div class="blog-post">
                  <p class="blog-post-meta">{{post['date'].day}}/{{post['date'].month}}/{{post['date'].year}} by {{post['author']}}</p>
                  <pre>{{ post['text'] }}</pre>
              </div>
            {% endfor %}
          </div>

        {%endfor%}


    </div>
  </div>

{% endblock %}